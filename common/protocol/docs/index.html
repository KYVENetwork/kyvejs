<!DOCTYPE html>
<html class="default">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <title>@kyvejs/protocol</title>
    <meta name="description" content="Documentation for @kyvejs/protocol" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="assets/style.css" />
    <link rel="stylesheet" href="assets/highlight.css" />
    <script async src="assets/search.js" id="search-script"></script>
  </head>
  <body>
    <script>
      document.body.classList.add(localStorage.getItem("tsd-theme") || "os");
    </script>
    <header>
      <div class="tsd-page-toolbar">
        <div class="container">
          <div class="table-wrap">
            <div class="table-cell" id="tsd-search" data-base=".">
              <div class="field">
                <label
                  for="tsd-search-field"
                  class="tsd-widget search no-caption"
                  >Search</label
                ><input type="text" id="tsd-search-field" />
              </div>
              <ul class="results">
                <li class="state loading">Preparing search index...</li>
                <li class="state failure">The search index is not available</li>
              </ul>
              <a href="index.html" class="title">@kyvejs/protocol</a>
            </div>
            <div class="table-cell" id="tsd-widgets">
              <div id="tsd-filter">
                <a
                  href="#"
                  class="tsd-widget options no-caption"
                  data-toggle="options"
                  >Options</a
                >
                <div class="tsd-filter-group">
                  <div class="tsd-select" id="tsd-filter-visibility">
                    <span class="tsd-select-label">All</span>
                    <ul class="tsd-select-list">
                      <li data-value="public">Public</li>
                      <li data-value="protected">Public/Protected</li>
                      <li data-value="private" class="selected">All</li>
                    </ul>
                  </div>
                  <input
                    type="checkbox"
                    id="tsd-filter-inherited"
                    checked
                  /><label class="tsd-widget" for="tsd-filter-inherited"
                    >Inherited</label
                  ><input
                    type="checkbox"
                    id="tsd-filter-externals"
                    checked
                  /><label class="tsd-widget" for="tsd-filter-externals"
                    >Externals</label
                  >
                </div>
              </div>
              <a href="#" class="tsd-widget menu no-caption" data-toggle="menu"
                >Menu</a
              >
            </div>
          </div>
        </div>
      </div>
      <div class="tsd-page-title">
        <div class="container"><h1>@kyvejs/protocol</h1></div>
      </div>
    </header>
    <div class="container container-main">
      <div class="row">
        <div class="col-8 col-content">
          <div class="tsd-panel tsd-typography">
            <a
              href="#architecture-overview"
              id="architecture-overview"
              style="color: inherit; text-decoration: none"
            >
              <h1>Architecture Overview</h1>
            </a>
            <p>
              The KYVE protocol node is in general responsible for collecting
              data from various sources and submitting them for validation to
              the KYVE network. It does that by transforming the data, packaging
              it in bundles and storing them on permanent storage providers like
              Arweave, where other protocol nodes can retrieve and validate them
              for their correctness.
            </p>
            <p>
              During all that time KYVE protocol nodes are communicating with
              the KYVE blockchain, a cosmos-sdk based PoS chain providing the
              main KYVE logic of registering bundle proposals and keeping track
              of votes.
            </p>

            <a
              href="#general-protocol-node-architecture"
              id="general-protocol-node-architecture"
              style="color: inherit; text-decoration: none"
            >
              <h2>General protocol node architecture</h2>
            </a>
            <p>The basic architecture of a protocol node can be found below:</p>
            <br />
            <br />

            <p align="center">
              <img
                src="https://arweave.net/FAj2xIyD_D-_sfLr5XGeUY91kHF8aEBG8oa9dgxrCPQ"
                style="display: block; margin-left: auto; margin-right: auto"
              />
            </p>

            <br />
            <br />

            <p><strong>Overview</strong></p>
            <ul>
              <li>
                <strong>KYVE blockchain</strong> - a cosmos-sdk based PoS
                blockchain which has all the KYVE logic and is responsible for
                scheduling bundle proposal rounds and keeping track of bundle
                proposals and their respected votes from protocol nodes
              </li>
              <li>
                <strong>Permanent Storage</strong> - usually web3 permanent
                storage providers like Arweave. This is the place where all
                validated data from KYVE will be archived
              </li>
              <li>
                <strong>Local Node Cache</strong> - a local Key-Value-Store on
                the protocol node for caching all the data which is currently in
                the validation process
              </li>
              <li>
                <strong>Data Sources</strong> - data sources defined by the
                storage pool. There can be multiple data sources or only one.
                Examples for data sources can be blockchain rpc endpoints or
                web2 api endpoints which need to be validated and archived
              </li>
              <li>
                <strong>Proposal Round Cyclic Updates</strong> - schedules both
                main threads when to start collecting data or when to start
                validating/uploading bundle proposals. This schedule is dictated
                by the KYVE blockchain
              </li>
              <li>
                <strong>Data Collection Thread</strong> - the main thread
                collecting the required data for the current proposal round. It
                requests all given data sources defined on the storage pool and
                writes them to the local node cache
              </li>
              <li>
                <strong>Data Indexing Thread</strong> - the main thread
                validating proposed bundles proposals from other protocol nodes
                and proposing new bundle proposals to the network. It
                communicates closely with the KYVE blockchain and reads all the
                cached items for validation and proposition. Also for validation
                and proposition it reads and writes data to the permanent
                storage provider
              </li>
            </ul>
            <br />
            <br />

            <a
              href="#data-collection-thread-overview"
              id="data-collection-thread-overview"
              style="color: inherit; text-decoration: none"
            >
              <h2>Data collection thread overview</h2>
            </a>
            <p>
              A more detailed architecture overview of the data collection
              thread can be found below:
            </p>
            <br />
            <br />

            <p align="center">
              <img
                src="https://arweave.net/3Ot8WfE4YyLWD4PkDcsQrhj_MzKGobWjiLV0hAIvyzE"
                style="display: block; margin-left: auto; margin-right: auto"
              />
            </p>

            <br />
            <br />

            <ul>
              <li>
                <strong>core logic (red)</strong> - all the logic controlled by
                <code>@kyve/core</code>
              </li>
              <li>
                <strong>runtime logic (blue)</strong> - all the custom logic
                defined by the <code>runtime</code>. This is very application
                specific
              </li>
              <li>
                <strong>external data sources (green)</strong> - data sources
                defined on the storage pool which should be validated and
                archived
              </li>
              <li>
                <strong>Key-Value-Store (yellow)</strong> - a local
                Key-Value-Store which serves as cache for the protocol node
              </li>
            </ul>
            <br />
            <br />

            <a
              href="#data-indexing-thread-overview"
              id="data-indexing-thread-overview"
              style="color: inherit; text-decoration: none"
            >
              <h2>Data indexing thread overview</h2>
            </a>
            <p>
              A more detailed architecture overview of the data indexing thread
              can be found below:
            </p>
            <br />
            <br />

            <p align="center">
              <img
                src="https://arweave.net/8PKehcv8vYYhtKI2KRBGJkpe6CNvD8uDrudau_Zfpag"
                style="display: block; margin-left: auto; margin-right: auto"
              />
            </p>

            <br />
            <br />

            <ul>
              <li>
                <strong>core logic (red)</strong> - all the logic controlled by
                <code>@kyve/core</code>
              </li>
              <li>
                <strong>runtime logic (blue)</strong> - all the custom logic
                defined by the <code>runtime</code>. This is very application
                specific
              </li>
              <li>
                <strong>external data sources (green)</strong> - data sources
                defined on the storage pool which should be validated and
                archived
              </li>
              <li>
                <strong>Key-Value-Store (yellow)</strong> - a local
                Key-Value-Store which serves as cache for the protocol node
              </li>
              <li>
                <strong>Permanent Storage (grey)</strong> - a web3 permanent
                storage provider like Arweave where all the validated data from
                KYVE gets archived
              </li>
              <li>
                <strong>KYVE blockchain (orange)</strong> - the KYVE chain which
                keeps track of bundle proposals and votes
              </li>
            </ul>
            <br />
            <br />
          </div>
        </div>
        <div class="col-4 col-menu menu-sticky-wrap menu-highlight">
          <nav class="tsd-navigation primary">
            <ul>
              <li class="current"><a href="modules.html">Exports</a></li>
            </ul>
          </nav>
          <nav class="tsd-navigation secondary menu-sticky">
            <ul>
              <li class="tsd-kind-class">
                <a href="classes/ProtocolNode.html" class="tsd-kind-icon"
                  >Protocol<wbr />Node</a
                >
              </li>
              <li class="tsd-kind-interface">
                <a href="interfaces/DataItem.html" class="tsd-kind-icon"
                  >Data<wbr />Item</a
                >
              </li>
              <li class="tsd-kind-interface">
                <a href="interfaces/ICacheProvider.html" class="tsd-kind-icon"
                  >ICache<wbr />Provider</a
                >
              </li>
              <li class="tsd-kind-interface">
                <a href="interfaces/ICompression.html" class="tsd-kind-icon"
                  >ICompression</a
                >
              </li>
              <li class="tsd-kind-interface">
                <a href="interfaces/IMetrics.html" class="tsd-kind-icon"
                  >IMetrics</a
                >
              </li>
              <li class="tsd-kind-interface">
                <a href="interfaces/IRuntime.html" class="tsd-kind-icon"
                  >IRuntime</a
                >
              </li>
              <li class="tsd-kind-interface">
                <a href="interfaces/IStorageProvider.html" class="tsd-kind-icon"
                  >IStorage<wbr />Provider</a
                >
              </li>
              <li class="tsd-kind-interface">
                <a href="interfaces/Signature.html" class="tsd-kind-icon"
                  >Signature</a
                >
              </li>
              <li class="tsd-kind-type-alias">
                <a href="modules.html#BundleTag" class="tsd-kind-icon"
                  >Bundle<wbr />Tag</a
                >
              </li>
              <li class="tsd-kind-type-alias">
                <a href="modules.html#StorageReceipt" class="tsd-kind-icon"
                  >Storage<wbr />Receipt</a
                >
              </li>
              <li class="tsd-kind-variable">
                <a href="modules.html#ERROR_IDLE_TIME" class="tsd-kind-icon"
                  >ERROR_<wbr />IDLE_<wbr />TIME</a
                >
              </li>
              <li class="tsd-kind-variable">
                <a href="modules.html#IDLE_TIME" class="tsd-kind-icon"
                  >IDLE_<wbr />TIME</a
                >
              </li>
              <li class="tsd-kind-variable">
                <a href="modules.html#REFRESH_TIME" class="tsd-kind-icon"
                  >REFRESH_<wbr />TIME</a
                >
              </li>
              <li class="tsd-kind-variable">
                <a href="modules.html#VOTE" class="tsd-kind-icon">VOTE</a>
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#bundleToBytes" class="tsd-kind-icon"
                  >bundle<wbr />To<wbr />Bytes</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#bytesToBundle" class="tsd-kind-icon"
                  >bytes<wbr />To<wbr />Bundle</a
                >
              </li>
              <li class="tsd-kind-function tsd-has-type-parameter">
                <a
                  href="modules.html#callWithBackoffStrategy"
                  class="tsd-kind-icon"
                  >call<wbr />With<wbr />Backoff<wbr />Strategy</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#generateIndexPairs" class="tsd-kind-icon"
                  >generate<wbr />Index<wbr />Pairs</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#parseCache" class="tsd-kind-icon"
                  >parse<wbr />Cache</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#parseKeyfile" class="tsd-kind-icon"
                  >parse<wbr />Keyfile</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#parseMnemonic" class="tsd-kind-icon"
                  >parse<wbr />Mnemonic</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#parseNetwork" class="tsd-kind-icon"
                  >parse<wbr />Network</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#parsePoolId" class="tsd-kind-icon"
                  >parse<wbr />Pool<wbr />Id</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#sha256" class="tsd-kind-icon">sha256</a>
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#sleep" class="tsd-kind-icon">sleep</a>
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#standardizeJSON" class="tsd-kind-icon"
                  >standardizeJSON</a
                >
              </li>
              <li class="tsd-kind-function">
                <a href="modules.html#toHumanReadable" class="tsd-kind-icon"
                  >to<wbr />Human<wbr />Readable</a
                >
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <footer class="">
      <div class="container">
        <h2>Legend</h2>
        <div class="tsd-legend-group">
          <ul class="tsd-legend">
            <li class="tsd-kind-constructor tsd-parent-kind-class">
              <span class="tsd-kind-icon">Constructor</span>
            </li>
            <li class="tsd-kind-property tsd-parent-kind-class">
              <span class="tsd-kind-icon">Property</span>
            </li>
            <li class="tsd-kind-method tsd-parent-kind-class">
              <span class="tsd-kind-icon">Method</span>
            </li>
          </ul>
          <ul class="tsd-legend">
            <li class="tsd-kind-property tsd-parent-kind-interface">
              <span class="tsd-kind-icon">Property</span>
            </li>
            <li class="tsd-kind-method tsd-parent-kind-interface">
              <span class="tsd-kind-icon">Method</span>
            </li>
          </ul>
        </div>
        <h2>Settings</h2>
        <p>
          Theme
          <select id="theme">
            <option value="os">OS</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
        </p>
      </div>
    </footer>
    <div class="overlay"></div>
    <script src="assets/main.js"></script>
  </body>
</html>
